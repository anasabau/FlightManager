<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <script>
            function reload(){
                location.reload();
            }
        </script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width = device-width, initial-scale = 1"/>

        <h:outputStylesheet name="./css/default.css"/>
        <h:outputStylesheet name="./css/cssLayout.css"/>
        <title>Flight Manager</title>
        <link rel="shortcut icon" href="#{request.contextPath}/resources/logo_48.png"/>   
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"/>
    </h:head>

    <h:body>
        <h:form id="main">
            <h:graphicImage value="/resources/logo_text.png"/>
            <h:commandLink style="float: right" action="#{common.logout()}" >
                Logout from user: #{facesContext.externalContext.remoteUser}
            </h:commandLink>


            <p:tabView id="tabView" style="border-width: 0PX; border-bottom: 0PX" class="" dynamic="true" cache="false">
                <p:ajax event="tabChange" update=""/>
                <p:tab  id="ftab" title="Flight">
                    <ui:insert name="flight"/>
                </p:tab>

                <p:tab id="ctab" title="Company">
                    <ui:insert name="company"/>
                </p:tab>

                <p:tab id="utab" title="User" rendered="#{facesContext.externalContext.isUserInRole('admin')}">
                    <ui:insert name="user"/>
                </p:tab>

                <p:tab id="rtab" title="Role" rendered="#{facesContext.externalContext.isUserInRole('admin')}">
                    <ui:insert name="role"/>
                </p:tab>


                <p:tab id="atab" title="Airport">
                    <ui:insert name="airport"/>
                </p:tab>

                <p:tab id="ptab" title="Plane">
                    <ui:insert name="plane"/>
                </p:tab>

                <p:tab id="itab" title="Itinerary">
                    <ui:insert name="itinerary"/>
                </p:tab>

            </p:tabView> 
        </h:form>
    </h:body>

</html>
