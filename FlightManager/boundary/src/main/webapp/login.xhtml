<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>

        <script>
            function setFailedLogin() {
                localStorage["failedLogin"] = true;
            }

            window.onload = function () {
                if (localStorage["failedLogin"] === "true") {
                    var pElem = document.getElementById("errorMessage");

                    pElem.style = "color: red;";

                    pElem.innerHTML = "You failed to authenticate username or password are incorrect";
                    localStorage.removeItem("failedLogin");
                }
            };
        </script>

        <title>Flight Manager - Login</title>


        <link rel="shortcut icon" href="#{request.contextPath}/resources/logo_48.png"/>   
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"/>

        <link rel="stylesheet" href="resources/css/default.css"/>
        <link rel="stylesheet" href="resources/css/cssLayout.css"/>
    </h:head>
    <h:body>
        <center>
            <h:graphicImage value="/resources/logo_text.png"/>
            <f:view transient="true">
                <div>
                    <div class="container">
                        <h:form id="mainForm" class="form-signin " style="max-width: 330px">
                            <p:inputText id="userId" class="form-control" value="#{common.username}">Username</p:inputText>
                            <br></br>
                            <p:password class="form-control" value="#{common.password}">Password</p:password>
                            <br></br>
                            <p:commandButton   class="btn  btn-primary btn-block" style="text-align: center"  value="Login" action="#{common.login()}"/>

                            <p id="errorMessage"></p>
                        </h:form>
                    </div>
                </div>
            </f:view>
        </center>
    </h:body>
</html>

